/* Emergent Ontology — site styles */
:root {
  --bg: #0f0f0f;
  --bg2: #1a1a1a;
  --bg3: #222;
  --border: #333;
  --text: #e8e8e8;
  --text-dim: #888;
  --accent: #7c6fcd;
  --accent2: #5f9ea0;
  --link: #9b8fd4;
  --danger: #c0392b;
  --warn: #f39c12;
  --code-bg: #1a1a2e;
  --code-text: #a8ff78;
  --overlay-bg: rgba(0,0,0,.7);
  --shadow-color: rgba(0,0,0,.4);
  --font-sans: system-ui, -apple-system, 'Segoe UI', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', monospace;
  --radius: 6px;
}

/* Light theme */
[data-theme="light"] {
  --bg: #ffffff;
  --bg2: #f5f5f7;
  --bg3: #e8e8ec;
  --border: #d1d1d6;
  --text: #1d1d1f;
  --text-dim: #636366;
  --accent: #5b4dba;
  --accent2: #3d7f81;
  --link: #4a3fa0;
  --danger: #d63031;
  --warn: #b35900;
  --code-bg: #f0f0f8;
  --code-text: #2d6a1e;
  --overlay-bg: rgba(0,0,0,.35);
  --shadow-color: rgba(0,0,0,.12);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body {
  background: var(--bg);
  color: var(--text);
  font-family: var(--font-sans);
  line-height: 1.6;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}
a { color: var(--link); text-decoration: none; }
a:hover { text-decoration: underline; }
code, pre { font-family: var(--font-mono); }
pre {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem;
  overflow-x: auto;
}
h1 { font-size: 2rem; font-weight: 700; }
h2 { font-size: 1.5rem; font-weight: 600; }
h3 { font-size: 1.2rem; font-weight: 600; }
p { margin-bottom: .75rem; }

/* ── Site Header ── */
.site-header {
  display: flex;
  align-items: center;
  gap: 1.5rem;
  padding: 0 2rem;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
  height: 52px;
}
.site-logo {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-weight: 700;
  font-size: 1rem;
  color: var(--text);
  white-space: nowrap;
  flex-shrink: 0;
}
.site-logo:hover { text-decoration: none; color: var(--accent); }
.logo-mark { font-size: 1.2rem; }

/* Nav */
.site-nav { flex: 1; overflow: hidden; }
.nav-list {
  display: flex;
  gap: 0;
  list-style: none;
  height: 52px;
  align-items: stretch;
}
.nav-item { position: relative; display: flex; align-items: stretch; }
.nav-link {
  display: flex;
  align-items: center;
  gap: .35rem;
  padding: 0 .9rem;
  color: var(--text-dim);
  font-size: .88rem;
  white-space: nowrap;
  height: 100%;
  border-bottom: 2px solid transparent;
  transition: color .15s, border-color .15s;
}
.nav-link:hover { color: var(--text); text-decoration: none; border-bottom-color: var(--accent); }
.nav-count {
  background: var(--bg3);
  border-radius: 999px;
  padding: .1rem .45rem;
  font-size: .72rem;
  color: var(--text-dim);
}

/* Dropdown */
.has-dropdown:hover .nav-dropdown { display: block; }
.nav-dropdown {
  display: none;
  position: absolute;
  top: 100%;
  left: 0;
  min-width: 200px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 0 0 var(--radius) var(--radius);
  box-shadow: 0 8px 24px var(--shadow-color);
  list-style: none;
  z-index: 200;
  padding: .4rem 0;
}
.nav-dropdown li a {
  display: block;
  padding: .45rem 1rem;
  color: var(--text-dim);
  font-size: .85rem;
}
.nav-dropdown li a:hover { background: var(--bg3); color: var(--text); text-decoration: none; }
.nav-more a { color: var(--accent) !important; font-size: .8rem !important; }

/* Header actions */
.header-actions { display: flex; align-items: center; gap: .75rem; margin-left: auto; flex-shrink: 0; }
.search-toggle {
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-dim);
  padding: .35rem .55rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  transition: border-color .15s, color .15s;
}
.search-toggle:hover { border-color: var(--accent); color: var(--text); }
.theme-toggle {
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-dim);
  padding: .35rem .55rem;
  cursor: pointer;
  display: flex;
  align-items: center;
  transition: border-color .15s, color .15s;
  font-size: 1rem;
  line-height: 1;
}
.theme-toggle:hover { border-color: var(--accent); color: var(--text); }
/* Show sun in dark mode (click to go light), moon in light mode (click to go dark) */
.theme-icon-dark { display: none; }
.theme-icon-light { display: inline; }
[data-theme="light"] .theme-icon-dark { display: inline; }
[data-theme="light"] .theme-icon-light { display: none; }
.admin-link {
  background: var(--accent);
  color: #fff !important;
  padding: .35rem .85rem;
  border-radius: var(--radius);
  font-size: .85rem;
  white-space: nowrap;
}
.admin-link:hover { background: var(--link); text-decoration: none; }

/* Search overlay */
.search-overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay-bg);
  z-index: 500;
  display: flex;
  align-items: flex-start;
  justify-content: center;
  padding-top: 80px;
}
.search-overlay[hidden] { display: none; }
.search-modal {
  width: 100%;
  max-width: 580px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  position: relative;
}
.search-modal #search-input {
  width: 100%;
  background: transparent;
  border: none;
  border-bottom: 1px solid var(--border);
  padding: 1rem 1.25rem;
  color: var(--text);
  font-size: 1.1rem;
}
.search-modal #search-input:focus { outline: none; }
.search-modal .search-results { max-height: 360px; overflow-y: auto; }
.search-close {
  position: absolute;
  top: .75rem;
  right: .75rem;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text-dim);
  padding: .15rem .45rem;
  font-size: .75rem;
  cursor: pointer;
}

/* Main */
main { flex: 1; max-width: 860px; margin: 0 auto; padding: 2rem 1.5rem; width: 100%; }

/* Breadcrumbs */
.breadcrumbs ol {
  display: flex;
  flex-wrap: wrap;
  gap: .5rem;
  list-style: none;
  font-size: .85rem;
  color: var(--text-dim);
  margin-bottom: 1.5rem;
}
.breadcrumbs li + li::before { content: '/'; margin-right: .5rem; }
.breadcrumbs [aria-current="page"] { color: var(--text); }

/* Content header */
.content-header {
  margin-bottom: 2rem;
  border-bottom: 1px solid var(--border);
  padding-bottom: 1rem;
}
.content-header h1 { margin-bottom: .5rem; }
.content-tags, .tags { display: flex; flex-wrap: wrap; gap: .35rem; }
.tag {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .15rem .6rem;
  font-size: .78rem;
  color: var(--text-dim);
}
.post-meta { display: flex; align-items: center; gap: 1rem; color: var(--text-dim); font-size: .9rem; }

/* Blocks */
.blocks { display: flex; flex-direction: column; gap: 1.25rem; }
.block-text p { margin-bottom: .75rem; }
.block-callout {
  border-left: 4px solid var(--accent);
  padding: .75rem 1rem;
  background: var(--bg2);
  border-radius: 0 var(--radius) var(--radius) 0;
}
.callout-warn { border-color: var(--warn); }
.callout-danger { border-color: var(--danger); }
.callout-info { border-color: var(--accent2); }
.block-quote {
  border-left: 4px solid var(--accent);
  padding: .75rem 1.25rem;
  background: var(--bg2);
}
.block-quote p { font-style: italic; font-size: 1.1rem; margin: 0; }
.block-quote cite { display: block; margin-top: .5rem; color: var(--text-dim); font-size: .9rem; }
.block-image img { max-width: 100%; border-radius: var(--radius); }
.block-image figcaption { margin-top: .5rem; color: var(--text-dim); font-size: .85rem; text-align: center; }
.block-divider { border: none; border-top: 1px solid var(--border); margin: 1rem 0; }

/* Embed & video blocks */
.block-embed, .block-video { margin: 1rem 0; }
.block-embed iframe, .block-video iframe {
  width: 100%;
  aspect-ratio: 16 / 9;
  border-radius: var(--radius);
  border: 1px solid var(--border);
}
.block-embed figcaption, .block-video figcaption {
  margin-top: .5rem;
  color: var(--text-dim);
  font-size: .85rem;
  text-align: center;
}

/* TOC block */
.block-toc {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem 1.25rem;
}
.toc-title {
  font-weight: 600;
  font-size: .95rem;
  margin-bottom: .75rem;
  color: var(--accent);
}
.block-toc ol {
  list-style: none;
  display: flex;
  flex-direction: column;
  gap: .25rem;
}
.block-toc li a { font-size: .9rem; }
.toc-level-1 { padding-left: 0; }
.toc-level-2 { padding-left: 1rem; }
.toc-level-3 { padding-left: 2rem; }
.toc-level-4 { padding-left: 3rem; }

/* Wiki/experiment embed links */
.block-wiki-embed, .block-experiment-embed {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .75rem 1rem;
}
.wiki-embed-link, .exp-embed-link {
  display: flex;
  align-items: center;
  gap: .5rem;
  font-size: .95rem;
}

/* Code block */
.block-code pre {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem;
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: .88rem;
  color: var(--code-text);
  margin: 0;
}
.block-code code {
  background: none;
  padding: 0;
  color: inherit;
  font-size: inherit;
}

/* Heading block */
.block-heading { margin: 1.25rem 0 .5rem; }

/* Button block */
.block-button {
  margin: 1rem 0;
}

/* Columns block */
.block-columns {
  display: grid;
  gap: 1.5rem;
  margin: 1rem 0;
}
.block-columns-2 { grid-template-columns: 1fr 1fr; }
.block-columns-3 { grid-template-columns: 1fr 1fr 1fr; }
.block-columns-4 { grid-template-columns: repeat(4, 1fr); }
.block-columns .column p { margin-bottom: .5rem; }
@media (max-width: 600px) {
  .block-columns-2, .block-columns-3, .block-columns-4 { grid-template-columns: 1fr; }
}

/* Spacer block */
.block-spacer { width: 100%; }

/* HTML block */
.block-html { margin: 1rem 0; }

/* Wiki */
.wiki-body h1, .wiki-body h2, .wiki-body h3 { margin: 1.5rem 0 .5rem; }
.wiki-body p { margin-bottom: .75rem; }
.conflict-banner {
  background: color-mix(in srgb, var(--warn) 15%, var(--bg2));
  border: 1px solid var(--warn);
  border-radius: var(--radius);
  padding: .75rem 1rem;
  margin-bottom: 1.5rem;
}
.revision-history {
  margin-top: 3rem;
  border-top: 1px solid var(--border);
  padding-top: 1.5rem;
}
.revision-history h2 { margin-bottom: 1rem; font-size: 1.1rem; }
.rev-list { list-style: none; display: flex; flex-direction: column; gap: .5rem; }
.rev-entry { display: flex; gap: 1rem; font-size: .85rem; color: var(--text-dim); }
.rev-id { font-family: var(--font-mono); }
.rev-overflow { margin-top: .5rem; }
.rev-expand-toggle {
  cursor: pointer;
  font-size: .8rem;
  color: var(--accent);
  padding: .35rem 0;
  list-style: none;
}
.rev-expand-toggle::-webkit-details-marker { display: none; }
.rev-expand-toggle::before { content: '▸ '; }
details[open] > .rev-expand-toggle::before { content: '▾ '; }
.rev-list-older { margin-top: .5rem; }

/* Experiments */
.exp-entries { list-style: none; display: flex; flex-direction: column; gap: 1rem; }
.exp-entry {
  display: flex;
  gap: 1rem;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem;
  align-items: flex-start;
}
.entry-kind { font-size: 1.2rem; flex-shrink: 0; }
.entry-body { flex: 1; min-width: 0; }
.entry-body p { margin-bottom: .5rem; }
.entry-ts { flex-shrink: 0; color: var(--text-dim); font-size: .8rem; white-space: nowrap; }
.entry-eo-meta { display: flex; flex-direction: column; align-items: flex-end; gap: .25rem; flex-shrink: 0; }
.attachments { margin-top: .5rem; padding-left: 1.25rem; font-size: .85rem; }

/* ── Search results (shared) ── */
.search-result-item {
  display: block;
  padding: .6rem 1rem;
  border-bottom: 1px solid var(--border);
  color: var(--text);
}
.search-result-item:last-child { border-bottom: none; }
.search-result-item:hover { background: var(--bg3); text-decoration: none; }
.search-result-type {
  display: inline-block;
  font-size: .7rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .04em;
  padding: .15em .5em;
  border-radius: 3px;
  background: var(--bg3);
  color: var(--text-dim);
  margin-right: .5rem;
  vertical-align: middle;
}
.search-no-results {
  padding: .8rem 1rem;
  color: var(--text-dim);
  font-style: italic;
}

/* ── Home page ── */
main.home { max-width: 1100px; }

.home-hero {
  text-align: center;
  padding: 3.5rem 1rem 2rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1rem;
}
.hero-badge {
  display: inline-block;
  font-size: .8rem;
  letter-spacing: .08em;
  text-transform: uppercase;
  color: var(--accent);
  background: color-mix(in srgb, var(--accent) 12%, transparent);
  border: 1px solid color-mix(in srgb, var(--accent) 30%, transparent);
  border-radius: 999px;
  padding: .25rem .85rem;
  margin-bottom: 1rem;
}
.hero-title {
  font-size: 2.4rem;
  font-weight: 700;
  letter-spacing: -.02em;
  margin-bottom: .75rem;
}
.hero-sub {
  color: var(--text-dim);
  font-size: 1.1rem;
  max-width: 560px;
  margin: 0 auto .75rem;
  line-height: 1.7;
}
.hero-stats {
  color: var(--text-dim);
  font-size: .85rem;
  margin: 0;
}

/* Home sections */
.home-section {
  margin-top: 2.5rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--border);
}
.home-section:last-child { border-bottom: none; }
.home-section--tags { border-bottom: none; }
.section-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: 1.25rem;
}
.section-title {
  font-size: 1.2rem;
  font-weight: 600;
  display: flex;
  align-items: center;
  gap: .5rem;
  border: none;
  margin: 0;
}
.section-icon { font-size: 1rem; }
.section-viewall {
  font-size: .82rem;
  color: var(--accent);
}
.section-viewall:hover { text-decoration: underline; }
.section-footer { margin-top: 1.25rem; }
.empty-note { color: var(--text-dim); font-style: italic; font-size: .95rem; }

/* Content grid (cards) */
.content-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
  gap: 1rem;
}
.content-grid--sm {
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
}
.content-card {
  display: block;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem 1.1rem;
  transition: border-color .15s, transform .1s;
  color: var(--text);
}
.content-card:hover {
  border-color: var(--accent);
  text-decoration: none;
  transform: translateY(-2px);
}
.content-card--exp { border-style: dashed; }
.card-type {
  font-size: .7rem;
  text-transform: uppercase;
  letter-spacing: .07em;
  color: var(--accent);
  margin-bottom: .35rem;
}
.card-title { font-size: 1rem; font-weight: 600; margin-bottom: .4rem; }
.card-excerpt { font-size: .83rem; color: var(--text-dim); line-height: 1.5; margin: 0 0 .5rem; }
.card-tags { display: flex; flex-wrap: wrap; gap: .3rem; margin-top: .5rem; }

/* List cards (blog style) */
.content-list-cards { display: flex; flex-direction: column; gap: .6rem; }
.list-card {
  display: flex;
  align-items: center;
  gap: 1rem;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .85rem 1rem;
  color: var(--text);
  transition: border-color .15s;
}
.list-card:hover { border-color: var(--accent); text-decoration: none; }
.list-card-body { flex: 1; min-width: 0; }
.list-card-title { font-size: .95rem; font-weight: 600; margin-bottom: .25rem; }
.list-card-arrow { color: var(--text-dim); flex-shrink: 0; }

/* Tag cloud */
.tag-cloud { display: flex; flex-wrap: wrap; gap: .5rem; }
.tag-lg {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .3rem .9rem;
  font-size: .85rem;
  color: var(--text-dim);
  cursor: default;
}
.tag-lg:hover { border-color: var(--accent); color: var(--text); }

/* Empty state */
.home-empty { padding: 3rem 0; text-align: center; }
.empty-card {
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 1rem;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2.5rem 3rem;
  max-width: 360px;
}
.empty-icon { font-size: 2.5rem; }
.empty-card h2 { font-size: 1.2rem; }
.empty-card p { color: var(--text-dim); font-size: .9rem; margin: 0; }

/* Content list (simple) */
.content-list { list-style: none; display: flex; flex-direction: column; gap: .75rem; }
.content-list li { display: flex; align-items: baseline; gap: .75rem; flex-wrap: wrap; }
.empty-page { color: var(--text-dim); font-style: italic; }

/* ── Buttons ── */
.content-actions { margin-top: 2.5rem; padding-top: 1.5rem; border-top: 1px solid var(--border); display: flex; gap: .75rem; flex-wrap: wrap; }
.btn {
  display: inline-flex;
  align-items: center;
  gap: .4rem;
  padding: .45rem 1rem;
  border-radius: var(--radius);
  font-size: .88rem;
  border: 1px solid var(--border);
  color: var(--text-dim);
  transition: border-color .15s, color .15s, background .15s;
  cursor: pointer;
  background: none;
}
.btn:hover { border-color: var(--accent); color: var(--text); text-decoration: none; }
.btn-primary { background: var(--accent); border-color: var(--accent); color: #fff; }
.btn-primary:hover { background: var(--link); border-color: var(--link); color: #fff; }
.btn-outline { border-color: var(--accent); color: var(--accent); }
.btn-outline:hover { background: color-mix(in srgb, var(--accent) 12%, transparent); color: var(--text); }
.btn-edit { border-color: var(--accent); color: var(--accent); display: none; }
html[data-eo-auth] .btn-edit { display: inline-block; }

/* ── Admin preview drawer ── */
.admin-drawer-overlay {
  position: fixed; inset: 0; z-index: 9998;
  background: rgba(0,0,0,.45);
  opacity: 0; transition: opacity .25s;
  pointer-events: none;
}
.admin-drawer-overlay.open { opacity: 1; pointer-events: auto; }

.admin-drawer {
  position: fixed; top: 0; right: 0; bottom: 0; z-index: 9999;
  width: min(520px, 90vw);
  background: var(--bg);
  border-left: 1px solid var(--border);
  box-shadow: -4px 0 24px rgba(0,0,0,.4);
  transform: translateX(100%);
  transition: transform .25s ease;
  display: flex; flex-direction: column;
}
.admin-drawer.open { transform: translateX(0); }

.admin-drawer-header {
  display: flex; align-items: center; justify-content: space-between;
  padding: .6rem 1rem;
  border-bottom: 1px solid var(--border);
  background: var(--bg2);
  flex-shrink: 0;
}
.admin-drawer-header span {
  font-size: .85rem; font-weight: 600; color: var(--text);
}
.admin-drawer-close {
  background: none; border: 1px solid var(--border); border-radius: var(--radius);
  color: var(--text-dim); cursor: pointer; padding: .2rem .6rem; font-size: .8rem;
  transition: color .15s, border-color .15s;
}
.admin-drawer-close:hover { color: var(--text); border-color: var(--accent); }

.admin-drawer iframe {
  flex: 1; border: none; width: 100%; background: var(--bg);
}

/* ── EO Operation annotations ── */
.eo-op {
  font-family: var(--font-mono);
  font-size: .72rem;
  color: var(--text-dim);
  background: color-mix(in srgb, var(--accent) 6%, var(--bg));
  border: 1px solid color-mix(in srgb, var(--accent) 18%, var(--border));
  border-radius: 3px;
  padding: .1rem .5rem;
  white-space: nowrap;
  display: inline-block;
  letter-spacing: .02em;
}
.eo-op .eo-sym {
  color: var(--accent);
  font-weight: 700;
  margin-right: .15rem;
}
.eo-op .eo-name {
  color: var(--accent);
  font-weight: 600;
}
.eo-op .eo-target {
  color: var(--text-dim);
}
.eo-op .eo-operand {
  color: color-mix(in srgb, var(--text-dim) 70%, var(--accent));
}

/* Block-level EO annotations (page blocks) */
.block-eo-wrap {
  position: relative;
}
.block-eo-wrap .eo-op {
  position: absolute;
  top: -0.2rem;
  right: 0;
  opacity: .5;
  transition: opacity .15s;
  z-index: 10;
  font-size: .65rem;
}
.block-eo-wrap:hover .eo-op {
  opacity: 1;
}

/* Revision/entry EO ops */
.eo-op-inline {
  margin-left: auto;
  flex-shrink: 0;
}

/* Phosphor icon inside EO annotations */
.eo-ph-icon {
  color: var(--accent);
  font-size: .85rem;
  vertical-align: -1px;
  margin-right: .2rem;
}

/* INS vs ALT revision styling */
.rev-entry--ins .eo-name { color: var(--accent2); }
.rev-entry--ins .eo-ph-icon { color: var(--accent2); }
.rev-entry--alt .eo-name { color: var(--accent); }
.rev-entry--alt .eo-ph-icon { color: var(--accent); }

/* ── X-Ray (first-class UI element) ── */
.xray-fab {
  position: fixed;
  bottom: 1.5rem;
  right: 1.5rem;
  z-index: 400;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .45rem .9rem;
  font-size: .8rem;
  color: var(--text-dim);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: .4rem;
  box-shadow: 0 4px 16px var(--shadow-color);
  transition: border-color .15s, color .15s;
}
.xray-fab:hover { border-color: var(--accent); color: var(--text); }
.xray-fab.active { border-color: var(--accent); color: var(--accent); background: color-mix(in srgb, var(--accent) 10%, var(--bg2)); }
.xray-panel {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  max-height: 45vh;
  background: var(--bg2);
  border-top: 2px solid var(--accent);
  z-index: 350;
  overflow-y: auto;
  padding: 1rem 1.5rem;
  font-family: var(--font-mono);
  font-size: .78rem;
  display: none;
}
.xray-panel.open { display: block; }
.xray-header { display: flex; align-items: center; justify-content: space-between; margin-bottom: .75rem; }
.xray-title { color: var(--accent); font-size: .85rem; font-weight: 600; }
.xray-close { background: none; border: none; color: var(--text-dim); cursor: pointer; font-size: 1rem; }
.xray-row {
  display: grid;
  grid-template-columns: 80px 60px 1fr auto;
  gap: .5rem;
  padding: .3rem 0;
  border-bottom: 1px solid var(--border);
  color: var(--text-dim);
}
.xray-op { color: var(--accent); font-weight: 600; }
.xray-ts { font-size: .7rem; opacity: .6; }
.xray-status-sent { color: var(--accent2, #4caf50); }
.xray-status-pending { color: var(--warn); }
.xray-status-error { color: var(--danger); }

/* ── Post prev/next navigation ── */
.post-nav {
  display: flex;
  gap: 1rem;
  margin-top: 2.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--border);
}
.post-nav-prev { flex: 1; }
.post-nav-next { flex: 1; text-align: right; }
.post-nav a {
  display: inline-flex;
  flex-direction: column;
  gap: .2rem;
  max-width: 100%;
}
.post-nav a:hover { text-decoration: none; }
.post-nav-label { font-size: .78rem; text-transform: uppercase; letter-spacing: .06em; color: var(--accent); }
.post-nav-title { font-size: .92rem; font-weight: 500; color: var(--text); }
.post-nav a:hover .post-nav-title { color: var(--link); }

/* List card meta row */
.list-card-meta { display: flex; align-items: center; gap: .75rem; font-size: .82rem; color: var(--text-dim); margin-top: .2rem; flex-wrap: wrap; }

/* ── Footer ── */
.site-footer {
  padding: 1.5rem 2rem;
  border-top: 1px solid var(--border);
  background: var(--bg2);
}
.footer-inner {
  max-width: 1100px;
  margin: 0 auto;
  display: flex;
  align-items: center;
  justify-content: space-between;
  flex-wrap: wrap;
  gap: 1rem;
}
.footer-brand {
  display: flex;
  align-items: center;
  gap: .5rem;
  color: var(--text-dim);
  font-size: .85rem;
}
.footer-nav {
  display: flex;
  gap: 1.25rem;
  flex-wrap: wrap;
}
.footer-nav a { color: var(--text-dim); font-size: .82rem; }
.footer-nav a:hover { color: var(--text); }

/* ── Editable homepage area ── */
.home-editable {
  padding: 2rem 0 1rem;
  border-bottom: 1px solid var(--border);
  margin-bottom: 1rem;
}
.home-edit-link {
  display: flex;
  justify-content: center;
  margin-top: 1.5rem;
}

/* ── Home Two-Column Layout ── */
.home-columns {
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 2rem;
  align-items: start;
}
.home-col-main { min-width: 0; }

/* ── Rune Grid (3x3, right column) ── */
.rune-grid-aside {
  position: sticky;
  top: 68px;
  padding-top: 1rem;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .5rem;
}
.rune-mode-toggle {
  display: flex;
  align-items: center;
  gap: .35rem;
  margin-bottom: .5rem;
  padding: .25rem .6rem;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-dim);
  font-size: .7rem;
  font-family: var(--font-mono);
  font-weight: 600;
  letter-spacing: .05em;
  cursor: pointer;
  transition: border-color .15s, color .15s;
  width: 100%;
  justify-content: center;
  max-width: 156px;
}
.rune-mode-toggle:hover {
  border-color: var(--accent);
  color: var(--text);
}
.rune-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 3px;
  width: 156px;
}
.rune-grid--inline {
  width: 100%;
  max-width: 320px;
  margin: 0 auto;
}
.rune-cell {
  aspect-ratio: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 4px;
  cursor: pointer;
  transition: border-color .15s, background .15s, transform .1s;
  text-decoration: none;
  color: var(--text);
}
.rune-cell:hover {
  border-color: var(--rune-color, var(--accent));
  background: var(--bg3);
  transform: scale(1.08);
  text-decoration: none;
  box-shadow: 0 0 12px color-mix(in srgb, var(--rune-color, var(--accent)) 25%, transparent);
}
.rune-display {
  color: var(--rune-color, var(--accent));
  font-weight: 600;
  line-height: 1;
  text-align: center;
  margin-bottom: 2px;
  transition: opacity .2s ease, transform .2s ease;
}
.rune-display[data-version="symbol"] { font-size: 1.4rem; }
.rune-display[data-version="code"] { font-family: var(--font-mono); font-size: .8rem; letter-spacing: .08em; }
.rune-display[data-version="greek"] { font-size: 1.3rem; }
.rune-display[hidden] { display: none; }

/* ALT toggle button */
.alt-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  height: 28px;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 50%;
  color: #fbbf24;
  font-size: .85rem;
  cursor: pointer;
  transition: border-color .15s, background .15s, transform .15s;
  padding: 0;
}
.alt-toggle:hover {
  border-color: #fbbf24;
  background: var(--bg3);
  transform: scale(1.15);
  box-shadow: 0 0 8px rgba(251, 191, 36, .25);
}
.alt-toggle-icon { line-height: 1; }

/* Operator grid container (inline block version) */
.operator-grid-container {
  display: flex;
  align-items: flex-start;
  gap: .75rem;
  justify-content: center;
}

/* ── Rune display mode toggling ── */
.rune-sym--greek,
.rune-sym--code { display: none; }
.rune-sym--rune { display: block; }

.rune-grid[data-mode="greek"] .rune-sym--rune { display: none; }
.rune-grid[data-mode="greek"] .rune-sym--greek { display: block; font-style: italic; }
.rune-grid[data-mode="greek"] .rune-sym--code { display: none; }

.rune-grid[data-mode="code"] .rune-sym--rune { display: none; }
.rune-grid[data-mode="code"] .rune-sym--greek { display: none; }
.rune-grid[data-mode="code"] .rune-sym--code {
  display: block;
  font-family: var(--font-mono);
  font-size: .85rem;
  font-weight: 700;
  letter-spacing: .08em;
}
.rune-grid[data-mode="code"] .rune-code { display: none; }

/* ── Nine Operators Bar (compact, kept for fallback) ── */
.ops-bar-section {
  margin-top: 2rem;
  padding-bottom: 1.5rem;
  border-bottom: 1px solid var(--border);
}
.ops-bar-title {
  font-size: .85rem;
  font-weight: 600;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: .08em;
  margin-bottom: .75rem;
  text-align: center;
}
.ops-bar {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: .5rem;
}
.ops-pill {
  display: inline-flex;
  align-items: center;
  gap: .35rem;
  padding: .3rem .7rem;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-left: 3px solid var(--op-color, var(--accent));
  border-radius: var(--radius);
  color: var(--text);
  font-size: .82rem;
  white-space: nowrap;
  transition: border-color .15s, transform .1s, background .15s;
}
.ops-pill:hover {
  border-color: var(--op-color, var(--accent));
  background: var(--bg3);
  text-decoration: none;
  transform: translateY(-1px);
}
.ops-pill-sym {
  font-size: 1rem;
  color: var(--op-color, var(--accent));
  line-height: 1;
}
.ops-pill-code {
  font-family: var(--font-mono);
  font-size: .72rem;
  font-weight: 700;
  letter-spacing: .1em;
  color: var(--text-dim);
}

/* ── Responsive ── */
@media (max-width: 768px) {
  .site-header { gap: .75rem; padding: 0 1rem; }
  .logo-text { display: none; }
  .nav-list { gap: 0; }
  .nav-link { padding: 0 .6rem; font-size: .82rem; }
  main { padding: 1.25rem 1rem; }
  h1 { font-size: 1.6rem; }
  .hero-title { font-size: 1.8rem; }
  .content-grid { grid-template-columns: 1fr 1fr; }
  .home-columns { grid-template-columns: 1fr; }
  .rune-grid-aside { position: static; flex-direction: row; justify-content: center; padding-top: 0; }
  .rune-grid { width: 140px; }
}
@media (max-width: 480px) {
  .content-grid { grid-template-columns: 1fr; }
  .section-header { flex-direction: column; align-items: flex-start; gap: .5rem; }
  .footer-inner { flex-direction: column; }
  .ops-bar { gap: .35rem; }
  .ops-pill { padding: .25rem .5rem; font-size: .75rem; }
  .ops-pill-sym { font-size: .85rem; }
}

/* ── All Content (printable) ── */
.all-content { max-width: 900px; margin: 0 auto; }
.all-header { text-align: center; margin-bottom: 2rem; padding-bottom: 1.5rem; border-bottom: 2px solid var(--border); }
.all-header h1 { font-size: 2.2rem; margin-bottom: .5rem; }
.all-stats { color: var(--text-dim); margin-bottom: 1rem; }
.all-print-btn { cursor: pointer; }
.all-toc { margin-bottom: 3rem; padding: 1.5rem; background: var(--bg2); border-radius: var(--radius); }
.all-toc h2 { font-size: 1.2rem; margin-bottom: 1rem; }
.all-toc ol { padding-left: 1.5rem; }
.all-toc ol ol { margin-top: .3rem; }
.all-toc li { margin-bottom: .3rem; }
.all-toc a { color: var(--link); text-decoration: none; }
.all-toc a:hover { text-decoration: underline; }
.all-section { margin-bottom: 3rem; }
.all-section-title { font-size: 1.6rem; margin-bottom: 1.5rem; padding-bottom: .5rem; border-bottom: 1px solid var(--border); color: var(--accent); }
.all-article { margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid var(--border); }
.all-article:last-child { border-bottom: none; }
.all-article-header { margin-bottom: 1.5rem; }
.all-article-header h3 { font-size: 1.4rem; margin-bottom: .25rem; }
.all-article-link { font-size: .8rem; font-family: var(--font-mono); color: var(--text-dim); text-decoration: none; }
.all-article-link:hover { color: var(--link); }
.all-article-tags { margin-top: .5rem; }
.all-article-body { line-height: 1.7; }
.all-article-body h1, .all-article-body h2, .all-article-body h3, .all-article-body h4 { margin-top: 1.5rem; margin-bottom: .75rem; }
.all-article-body p { margin-bottom: 1rem; }
.all-article-body ul, .all-article-body ol { margin-bottom: 1rem; padding-left: 1.5rem; }
.all-article-body pre { margin-bottom: 1rem; padding: 1rem; background: var(--code-bg); border-radius: var(--radius); overflow-x: auto; }
.all-article-body img { max-width: 100%; height: auto; }
.all-loading { text-align: center; padding: 4rem 0; color: var(--text-dim); }

/* ── Print styles ── */
@media print {
  *, *::before, *::after { color: #000 !important; background: #fff !important; box-shadow: none !important; }
  body { font-size: 11pt; line-height: 1.5; }
  .site-header, .site-footer, .all-print-btn, .search-overlay, .admin-drawer,
  .eo-admin-only, .content-actions, #theme-toggle, #search-toggle,
  .nav-list, .ops-bar { display: none !important; }
  main { padding: 0 !important; }
  .all-content { max-width: none; }
  .all-toc { border: 1px solid #ccc; page-break-after: always; }
  .all-article { page-break-inside: avoid; }
  .all-article-header { page-break-after: avoid; }
  .all-section-title { page-break-after: avoid; }
  a { text-decoration: none; color: #000 !important; }
  a[href]::after { content: none; }
  pre { white-space: pre-wrap; word-wrap: break-word; border: 1px solid #ccc; }
  img { max-width: 100% !important; }
}
