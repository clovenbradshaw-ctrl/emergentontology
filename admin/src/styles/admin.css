/* EO Admin — editor styles */
:root {
  --bg: #0f0f0f;
  --bg2: #1a1a1a;
  --bg3: #222;
  --bg4: #2a2a2a;
  --border: #333;
  --text: #e8e8e8;
  --text-dim: #888;
  --accent: #7c6fcd;
  --link: #9b8fd4;
  --success: #4ade80;
  --danger: #f87171;
  --warn: #fbbf24;
  --code-bg: #1a1a2e;
  --code-text: #a8ff78;
  --overlay-bg: rgba(0,0,0,.6);
  --shadow-color: rgba(0,0,0,.4);
  --font-sans: system-ui, -apple-system, 'Segoe UI', sans-serif;
  --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
  --radius: 6px;
}

/* Light theme */
[data-theme="light"] {
  --bg: #ffffff;
  --bg2: #f5f5f7;
  --bg3: #e8e8ec;
  --bg4: #dddde1;
  --border: #d1d1d6;
  --text: #1d1d1f;
  --text-dim: #636366;
  --accent: #5b4dba;
  --link: #4a3fa0;
  --success: #1a7f37;
  --danger: #d1242f;
  --warn: #9a6700;
  --code-bg: #f0f0f8;
  --code-text: #2d6a1e;
  --overlay-bg: rgba(0,0,0,.35);
  --shadow-color: rgba(0,0,0,.12);
}
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
body { background: var(--bg); color: var(--text); font-family: var(--font-sans); line-height: 1.5; min-height: 100vh; }
a { color: var(--link); text-decoration: none; }
a:hover { text-decoration: underline; }
code { font-family: var(--font-mono); background: var(--bg3); padding: 1px 4px; border-radius: 3px; font-size: .9em; }
button { cursor: pointer; font-family: inherit; }
input, textarea, select {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text);
  font-family: inherit;
  font-size: .95rem;
  padding: .45rem .7rem;
}
input:focus, textarea:focus, select:focus { outline: none; border-color: var(--accent); }
textarea { resize: vertical; }

/* Admin app shell */
.admin-app { display: flex; flex-direction: column; min-height: 100vh; }

/* Header */
.admin-header {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: .6rem 1.5rem;
  background: var(--bg2);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
}
.admin-logo { background: none; border: none; color: var(--text); font-size: 1.1rem; font-weight: 700; padding: 0; cursor: pointer; font-family: monospace; }
.admin-logo:hover { color: var(--accent); }
.admin-nav { display: flex; gap: .5rem; }
.nav-btn { background: none; border: 1px solid transparent; border-radius: var(--radius); color: var(--text-dim); padding: .3rem .75rem; font-size: .9rem; transition: .15s; }
.nav-btn:hover, .nav-btn.active { color: var(--text); border-color: var(--border); background: var(--bg3); }
.admin-header-right { display: flex; align-items: center; gap: .75rem; margin-left: auto; }
.user-badge { color: var(--text-dim); font-size: .82rem; font-family: var(--font-mono); }
.theme-toggle { background: none; border: 1px solid var(--border); border-radius: var(--radius); color: var(--text-dim); padding: .3rem .55rem; cursor: pointer; font-size: 1rem; line-height: 1; transition: border-color .15s, color .15s; }
.theme-toggle:hover { border-color: var(--accent); color: var(--text); }
.theme-icon-dark { display: none; }
.theme-icon-light { display: inline; }
[data-theme="light"] .theme-icon-dark { display: inline; }
[data-theme="light"] .theme-icon-light { display: none; }

/* Breadcrumb */
.admin-breadcrumb { display: flex; align-items: center; gap: .5rem; padding: .5rem 1.5rem; font-size: .85rem; color: var(--text-dim); border-bottom: 1px solid var(--border); background: var(--bg2); }
.admin-breadcrumb button { background: none; border: none; color: var(--link); font-size: .85rem; cursor: pointer; padding: 0; }

/* Main */
.admin-main { flex: 1; padding: 1.5rem; max-width: 1200px; margin: 0 auto; width: 100%; }

/* Site preview overlay */
.site-preview-overlay { position: fixed; inset: 0; z-index: 9000; background: var(--bg); display: flex; flex-direction: column; }
.site-preview-toolbar { display: flex; align-items: center; gap: 1rem; padding: .5rem 1rem; background: var(--bg2); border-bottom: 1px solid var(--border); flex-shrink: 0; }
.site-preview-label { font-weight: 600; font-size: .9rem; white-space: nowrap; }
.site-preview-url { font-family: var(--font-mono); font-size: .8rem; color: var(--text-dim); background: var(--bg3); padding: .2rem .6rem; border-radius: var(--radius); overflow: hidden; text-overflow: ellipsis; white-space: nowrap; flex: 1; min-width: 0; }
.site-preview-actions { display: flex; gap: .5rem; margin-left: auto; flex-shrink: 0; }
.site-preview-iframe { flex: 1; border: none; width: 100%; background: #fff; }

/* Buttons */
.btn { display: inline-flex; align-items: center; gap: .4rem; padding: .4rem .9rem; border-radius: var(--radius); border: 1px solid var(--border); color: var(--text-dim); background: transparent; font-size: .9rem; transition: .15s; }
.btn:hover { border-color: var(--accent); color: var(--text); text-decoration: none; }
.btn-primary { background: var(--accent); border-color: var(--accent); color: #fff; }
.btn-primary:hover { background: var(--link); border-color: var(--link); }
.btn-primary:disabled { opacity: .5; cursor: not-allowed; }
.btn-sm { font-size: .82rem; padding: .25rem .6rem; }
.btn-xs { font-size: .78rem; padding: .15rem .45rem; }
.btn-full { width: 100%; justify-content: center; }
.btn-icon { background: none; border: none; color: var(--text-dim); font-size: 1rem; padding: 2px 6px; border-radius: 3px; }
.btn-icon:hover { background: var(--bg3); color: var(--danger); }

/* Badges */
.badge { display: inline-block; padding: .15rem .5rem; border-radius: 999px; font-size: .75rem; border: 1px solid var(--border); }
.badge-draft { color: var(--warn); border-color: var(--warn); }
.badge-published { color: var(--success); border-color: var(--success); }
.badge-archived { color: var(--text-dim); }
.badge-public { color: var(--link); border-color: var(--link); }
.badge-private { color: var(--text-dim); border-color: var(--border); }

/* Error / conflict banners */
.error-banner { background: color-mix(in srgb, var(--danger) 15%, var(--bg2)); border: 1px solid var(--danger); border-radius: var(--radius); padding: .6rem 1rem; margin-bottom: 1rem; display: flex; justify-content: space-between; align-items: center; font-size: .9rem; }
.error-banner button { background: none; border: none; color: var(--danger); font-size: 1.1rem; }
.conflict-banner { background: color-mix(in srgb, var(--warn) 15%, var(--bg2)); border: 1px solid var(--warn); border-radius: var(--radius); padding: .6rem 1rem; margin-bottom: 1rem; display: flex; align-items: center; gap: .75rem; flex-wrap: wrap; font-size: .9rem; }

/* Field / form */
.field { display: flex; flex-direction: column; gap: .35rem; margin-bottom: .85rem; font-size: .9rem; }
.field span { color: var(--text-dim); font-size: .82rem; }
.field input, .field textarea, .field select { width: 100%; }

/* Login */
.login-screen { min-height: 100vh; display: flex; align-items: center; justify-content: center; background: var(--bg); }
.login-card { background: var(--bg2); border: 1px solid var(--border); border-radius: 12px; padding: 2.5rem; width: 100%; max-width: 380px; }
.login-logo { font-size: 2.5rem; text-align: center; font-family: var(--font-mono); color: var(--accent); margin-bottom: .75rem; }
.login-card h1 { text-align: center; font-size: 1.4rem; margin-bottom: .25rem; }
.login-sub { text-align: center; color: var(--text-dim); font-size: .9rem; margin-bottom: 1.5rem; }
.login-note { text-align: center; color: var(--text-dim); font-size: .78rem; margin-top: 1.25rem; }

/* Editor common */
.editor-loading { color: var(--text-dim); padding: 2rem; text-align: center; }
.editor-empty { color: var(--text-dim); padding: 2rem; text-align: center; }
.editor-toolbar { display: flex; align-items: center; gap: .75rem; margin-bottom: 1rem; flex-wrap: wrap; }
.editor-title { font-size: 1.1rem; font-weight: 600; }
.editor-status-badges { display: flex; gap: .4rem; }
.dirty-indicator { color: var(--warn); font-size: .82rem; }

/* Wiki editor */
.wiki-editor { display: flex; flex-direction: column; gap: 1rem; }
.editor-split { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; min-height: 400px; }
.editor-pane, .preview-pane { display: flex; flex-direction: column; gap: .5rem; }
.markdown-textarea { flex: 1; min-height: 300px; font-family: var(--font-mono); font-size: .9rem; resize: vertical; }
.editor-footer-row { display: flex; gap: .75rem; align-items: center; }
.summary-input { flex: 1; }
.preview-label { color: var(--text-dim); font-size: .82rem; }
.preview-body { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem; flex: 1; overflow: auto; }
.preview-body p { margin-bottom: .75rem; }
.preview-body h1, .preview-body h2, .preview-body h3 { margin: 1rem 0 .5rem; }
.revision-list { border-top: 1px solid var(--border); padding-top: 1rem; }
.revision-list h3 { margin-bottom: .75rem; font-size: 1rem; }
.revision-list ol { list-style: none; display: flex; flex-direction: column; gap: .4rem; }
.rev-item { display: flex; gap: .75rem; align-items: center; font-size: .85rem; padding: .35rem .5rem; background: var(--bg2); border-radius: var(--radius); }
.rev-item-expandable { flex-direction: column; align-items: stretch; }
.rev-item-header { display: flex; gap: .75rem; align-items: center; }
.rev-id { font-family: var(--font-mono); color: var(--text-dim); }
.rev-ts { color: var(--text-dim); white-space: nowrap; }
.rev-summary { flex: 1; color: var(--text); }
.rev-public { border-left: 3px solid var(--success); }
.rev-public-badge { display: inline-block; background: color-mix(in srgb, var(--success) 20%, transparent); color: var(--success); font-size: .7rem; padding: .05rem .35rem; border-radius: 999px; font-weight: 600; text-transform: uppercase; letter-spacing: .04em; }
.rev-public-divider { display: flex; align-items: center; gap: .5rem; padding: .25rem .5rem; font-size: .75rem; color: var(--success); }
.rev-public-divider hr { flex: 1; border: none; border-top: 1px dashed var(--success); }
/* Revision diff */
.rev-diff { margin-top: .5rem; border-top: 1px solid var(--border); padding-top: .5rem; }
.rev-diff-content { font-family: var(--font-mono); font-size: .8rem; line-height: 1.6; overflow-x: auto; }
.rev-diff-empty { color: var(--text-dim); font-size: .8rem; font-style: italic; }
.diff-line { padding: .1rem .5rem; border-radius: 3px; white-space: pre-wrap; word-break: break-word; }
.diff-ctx { color: var(--text-dim); }
.diff-del { background: color-mix(in srgb, var(--danger) 15%, var(--bg)); color: var(--danger); }
.diff-del del { text-decoration: line-through; }
.diff-add { background: color-mix(in srgb, var(--success) 12%, var(--bg)); color: var(--success); }
.diff-add ins { text-decoration: none; background: color-mix(in srgb, var(--success) 25%, transparent); border-radius: 2px; padding: 0 2px; }
.public-since-banner { background: color-mix(in srgb, var(--success) 10%, var(--bg2)); border: 1px solid color-mix(in srgb, var(--success) 40%, var(--border)); border-radius: var(--radius); padding: .5rem .75rem; margin-bottom: .75rem; font-size: .82rem; color: var(--success); }
.public-since-cell { font-size: .82rem; color: var(--text-dim); white-space: nowrap; }

/* Page builder */
.page-builder { display: flex; flex-direction: column; }
.builder-toolbar { display: flex; align-items: center; gap: .75rem; margin-bottom: .75rem; }
.builder-block-count { color: var(--text-dim); font-size: .82rem; margin-left: auto; }
.builder-layout { display: grid; grid-template-columns: 170px 1fr; gap: 1rem; min-height: 600px; }
.block-palette { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: .75rem; display: flex; flex-direction: column; gap: .25rem; overflow-y: auto; max-height: 80vh; }
.palette-group { display: flex; flex-direction: column; gap: .25rem; margin-bottom: .5rem; }
.palette-title { color: var(--text-dim); font-size: .72rem; text-transform: uppercase; letter-spacing: .06em; margin-bottom: .2rem; margin-top: .2rem; }
.palette-btn { display: flex; align-items: center; gap: .5rem; background: none; border: 1px solid var(--border); border-radius: var(--radius); color: var(--text-dim); padding: .35rem .55rem; font-size: .82rem; text-align: left; transition: .15s; }
.palette-btn:hover { border-color: var(--accent); color: var(--text); background: var(--bg3); }
.palette-icon { width: 16px; text-align: center; font-size: .78rem; }
.builder-canvas { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem; display: flex; flex-direction: column; gap: .75rem; }
.canvas-empty { color: var(--text-dim); text-align: center; padding: 2rem; font-size: .9rem; }
.builder-block { display: flex; flex-direction: column; background: var(--bg3); border: 1px solid var(--border); border-radius: var(--radius); padding: .6rem; cursor: pointer; transition: .15s; }
.builder-block:hover { border-color: var(--accent); }
.builder-block.selected { border-color: var(--accent); background: color-mix(in srgb, var(--accent) 10%, var(--bg3)); }
.block-header-row { display: flex; align-items: flex-start; gap: .5rem; }
.block-drag-handle { color: var(--text-dim); cursor: grab; font-size: 14px; padding: 2px; user-select: none; }
.block-drag-handle:active { cursor: grabbing; }
.block-content { flex: 1; min-width: 0; }
.block-actions { display: flex; flex-direction: column; gap: 2px; margin-left: auto; flex-shrink: 0; }
.block-action-btn { background: none; border: none; color: var(--text-dim); font-size: .9rem; padding: 1px 4px; border-radius: 3px; cursor: pointer; line-height: 1; }
.block-action-btn:hover { background: var(--bg2); color: var(--text); }
.block-action-delete:hover { color: var(--danger); }
.block-inline-editor { border-top: 1px solid var(--border); margin-top: .6rem; padding-top: .6rem; cursor: default; }
.block-inline-editor .inspector-form { gap: .75rem; }
.block-inline-editor .inspector-form input,
.block-inline-editor .inspector-form textarea,
.block-inline-editor .inspector-form select { font-size: .9rem; }
.block-inline-editor .rich-text-editor .tiptap { min-height: 150px; font-size: .9rem; }
.block-inline-editor textarea { min-height: 120px; }
.inspector-form { display: flex; flex-direction: column; gap: .65rem; }
.inspector-type { color: var(--accent); font-size: .8rem; font-family: var(--font-mono); margin-bottom: .25rem; }
.inspector-form input, .inspector-form textarea, .inspector-form select { width: 100%; font-size: .85rem; }

/* Rich text editor (TipTap) */
.rich-text-editor { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; }
.rich-text-editor:focus-within { border-color: var(--accent); }
.rte-toolbar {
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 4px 6px;
  background: var(--bg3);
  border-bottom: 1px solid var(--border);
  flex-wrap: wrap;
}
.rte-btn {
  background: none;
  border: 1px solid transparent;
  border-radius: 4px;
  color: var(--text-dim);
  font-size: .78rem;
  padding: 2px 6px;
  line-height: 1.4;
  cursor: pointer;
  transition: .1s;
  font-family: inherit;
}
.rte-btn:hover { background: var(--bg4); color: var(--text); }
.rte-btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }
.rte-sep { width: 1px; height: 16px; background: var(--border); margin: 0 3px; flex-shrink: 0; }

/* TipTap editor content area */
.rich-text-editor .tiptap { padding: .5rem .65rem; font-size: .85rem; line-height: 1.6; outline: none; min-height: 100px; color: var(--text); }
.rich-text-editor .tiptap > *:first-child { margin-top: 0; }
.rich-text-editor .tiptap > *:last-child { margin-bottom: 0; }
.rich-text-editor .tiptap p { margin: .4rem 0; }
.rich-text-editor .tiptap h1, .rich-text-editor .tiptap h2, .rich-text-editor .tiptap h3, .rich-text-editor .tiptap h4 { margin: .6rem 0 .3rem; font-weight: 600; }
.rich-text-editor .tiptap h1 { font-size: 1.3rem; }
.rich-text-editor .tiptap h2 { font-size: 1.1rem; }
.rich-text-editor .tiptap h3 { font-size: .95rem; }
.rich-text-editor .tiptap ul, .rich-text-editor .tiptap ol { padding-left: 1.2rem; margin: .3rem 0; }
.rich-text-editor .tiptap li { margin: .15rem 0; }
.rich-text-editor .tiptap blockquote { border-left: 3px solid var(--accent); padding-left: .75rem; margin: .5rem 0; color: var(--text-dim); font-style: italic; }
.rich-text-editor .tiptap code { background: var(--code-bg); color: var(--code-text); padding: 1px 4px; border-radius: 3px; font-family: var(--font-mono); font-size: .85em; }
.rich-text-editor .tiptap pre { background: var(--code-bg); border-radius: var(--radius); padding: .5rem .75rem; margin: .5rem 0; overflow-x: auto; }
.rich-text-editor .tiptap pre code { background: none; padding: 0; color: var(--code-text); font-size: .82rem; }
.rich-text-editor .tiptap a, .rich-text-editor .tiptap .editor-link { color: var(--link); text-decoration: underline; cursor: pointer; }
.rich-text-editor .tiptap hr { border: none; border-top: 1px solid var(--border); margin: .75rem 0; }
.rich-text-editor .tiptap p.is-editor-empty:first-child::before { content: attr(data-placeholder); color: var(--text-dim); pointer-events: none; float: left; height: 0; }
.rich-text-editor .tiptap table { border-collapse: collapse; width: 100%; margin: .5rem 0; }
.rich-text-editor .tiptap th, .rich-text-editor .tiptap td { border: 1px solid var(--border); padding: .35rem .5rem; text-align: left; min-width: 60px; }
.rich-text-editor .tiptap th { background: var(--bg3); font-weight: 600; font-size: .82rem; }
.rich-text-editor .tiptap td { font-size: .82rem; }
.rich-text-editor .tiptap .selectedCell { background: color-mix(in srgb, var(--accent) 15%, var(--bg2)); }

/* Bubble menu */
.rte-bubble {
  display: flex;
  gap: 2px;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 3px 4px;
  box-shadow: 0 4px 12px var(--shadow-color);
}
.rte-bubble button {
  background: none;
  border: none;
  color: var(--text-dim);
  font-size: .78rem;
  padding: 2px 6px;
  border-radius: 3px;
  cursor: pointer;
}
.rte-bubble button:hover { background: var(--bg4); color: var(--text); }
.rte-bubble button.active { color: var(--accent); }

/* Live preview */
.live-preview {
  background: var(--bg2);
  border: 1px solid var(--accent);
  border-radius: var(--radius);
  margin-bottom: 1rem;
  overflow: hidden;
}
.live-preview-header {
  display: flex;
  align-items: center;
  padding: .5rem .75rem;
  border-bottom: 1px solid var(--border);
  background: color-mix(in srgb, var(--accent) 8%, var(--bg2));
}
.live-preview-label {
  font-size: .78rem;
  color: var(--accent);
  text-transform: uppercase;
  letter-spacing: .06em;
  font-weight: 600;
}
.live-preview-body {
  padding: 1.5rem;
  max-height: 400px;
  overflow-y: auto;
  color: var(--text);
  line-height: 1.6;
}
.live-preview-body p { margin-bottom: .75rem; }
.live-preview-body h1, .live-preview-body h2, .live-preview-body h3, .live-preview-body h4 { margin: 1rem 0 .5rem; }
.live-preview-body h1 { font-size: 2rem; font-weight: 700; }
.live-preview-body h2 { font-size: 1.5rem; font-weight: 600; }
.live-preview-body h3 { font-size: 1.2rem; font-weight: 600; }
.live-preview-body pre { background: var(--code-bg); border: 1px solid var(--border); border-radius: var(--radius); padding: .75rem 1rem; overflow-x: auto; font-family: var(--font-mono); font-size: .88em; color: var(--code-text); margin: .75rem 0; }
.live-preview-body pre code { background: none; padding: 0; color: inherit; font-size: inherit; }
.live-preview-body hr { border: none; border-top: 1px solid var(--border); margin: 1rem 0; }
.live-preview-body a { color: var(--link); }
.live-preview-body .block-callout { border-left: 4px solid var(--accent); padding: .75rem 1rem; background: var(--bg3); border-radius: 0 var(--radius) var(--radius) 0; margin: .75rem 0; }
.live-preview-body .callout-warn { border-color: var(--warn); }
.live-preview-body .callout-danger { border-color: var(--danger); }
.live-preview-body .callout-info { border-color: var(--accent2, #5f9ea0); }
.live-preview-body .block-quote { border-left: 4px solid var(--accent); padding: .75rem 1.25rem; background: var(--bg3); margin: .75rem 0; }
.live-preview-body .block-quote p { font-style: italic; font-size: 1.1rem; margin: 0; }
.live-preview-body .block-quote cite { display: block; margin-top: .5rem; color: var(--text-dim); font-size: .9rem; }
.live-preview-body .block-image img { max-width: 100%; border-radius: var(--radius); }
.live-preview-body .block-image figcaption { margin-top: .5rem; color: var(--text-dim); font-size: .85rem; text-align: center; }
.live-preview-body .block-embed iframe, .live-preview-body .block-video iframe { width: 100%; aspect-ratio: 16 / 9; border-radius: var(--radius); border: 1px solid var(--border); }
.live-preview-body .block-toc { background: var(--bg3); border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem 1.25rem; margin: .75rem 0; }
.live-preview-body .toc-title { font-weight: 600; font-size: .95rem; margin-bottom: .75rem; color: var(--accent); }
.live-preview-body .block-toc ol { list-style: none; display: flex; flex-direction: column; gap: .25rem; padding: 0; }
.live-preview-body .toc-level-2 { padding-left: 1rem; }
.live-preview-body .toc-level-3 { padding-left: 2rem; }
.live-preview-body .toc-level-4 { padding-left: 3rem; }
.live-preview-body .block-wiki-embed, .live-preview-body .block-experiment-embed { background: var(--bg3); border: 1px solid var(--border); border-radius: var(--radius); padding: .75rem 1rem; margin: .75rem 0; }
.live-preview-body .block-button { margin: 1rem 0; }
.live-preview-body .btn { display: inline-flex; align-items: center; gap: .4rem; padding: .45rem 1rem; border-radius: var(--radius); border: 1px solid var(--border); color: var(--text-dim); background: none; font-size: .88rem; cursor: pointer; text-decoration: none; }
.live-preview-body .btn-primary { background: var(--accent); border-color: var(--accent); color: #fff; }
.live-preview-body .btn-outline { border-color: var(--accent); color: var(--accent); }
.live-preview-body .block-columns { display: grid; gap: 1.5rem; margin: 1rem 0; }
.live-preview-body .block-columns-2 { grid-template-columns: 1fr 1fr; }
.live-preview-body .block-columns-3 { grid-template-columns: 1fr 1fr 1fr; }
.live-preview-body .block-columns-4 { grid-template-columns: repeat(4, 1fr); }
.live-preview-body .block-columns-5 { grid-template-columns: repeat(5, 1fr); }
.live-preview-body .block-columns-6 { grid-template-columns: repeat(6, 1fr); }
.live-preview-body .block-columns .column { min-width: 0; }
.live-preview-body .block-columns .column p:last-child { margin-bottom: 0; }

/* Experiment editor */
.exp-editor { display: flex; flex-direction: column; gap: 1rem; }
.exp-entry-form { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem; display: flex; flex-direction: column; gap: .75rem; }
.kind-select { width: auto; }
.entry-textarea { width: 100%; min-height: 100px; }
.exp-log { list-style: none; display: flex; flex-direction: column; gap: .65rem; }
.exp-empty { color: var(--text-dim); padding: 1.5rem; text-align: center; }
.exp-log-entry { display: flex; gap: .75rem; background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: .75rem; align-items: flex-start; }
.entry-kind-icon { font-size: 1.2rem; flex-shrink: 0; }
.entry-content { flex: 1; }
.entry-content p { margin-bottom: .35rem; }
.entry-meta { color: var(--text-dim); font-size: .8rem; }

/* Content manager */
.content-manager { display: flex; flex-direction: column; gap: 2rem; }
.create-section h2, .content-list-section h2 { font-size: 1.1rem; margin-bottom: .75rem; }
.create-form { display: flex; gap: .65rem; flex-wrap: wrap; align-items: flex-end; }
.create-form input, .create-form select { flex: 1; min-width: 140px; }
.content-table { width: 100%; border-collapse: collapse; font-size: .9rem; }
.content-table th, .content-table td { padding: .6rem .75rem; border-bottom: 1px solid var(--border); text-align: left; }
.content-table th { color: var(--text-dim); font-weight: 500; font-size: .82rem; }
.content-table tbody tr:hover { background: var(--bg2); }
.slug-cell { font-family: var(--font-mono); font-size: .85rem; color: var(--text-dim); }
.type-badge { display: inline-block; padding: .1rem .5rem; border-radius: 999px; font-size: .78rem; }
.type-wiki { background: color-mix(in srgb, var(--accent) 20%, transparent); color: var(--link); }
.type-blog { background: color-mix(in srgb, #60a5fa 20%, transparent); color: #60a5fa; }
.type-page { background: color-mix(in srgb, #4ade80 20%, transparent); color: #4ade80; }
.type-experiment { background: color-mix(in srgb, #fb923c 20%, transparent); color: #fb923c; }
.status-toggle { background: none; border: 1px solid var(--border); border-radius: 999px; padding: .1rem .5rem; font-size: .78rem; cursor: pointer; transition: .15s; }
.status-draft { color: var(--warn); border-color: var(--warn); }
.status-published { color: var(--success); border-color: var(--success); }
.visibility-toggle { background: none; border: 1px solid var(--border); border-radius: 999px; padding: .1rem .5rem; font-size: .78rem; cursor: pointer; transition: .15s; }
.vis-public { color: var(--link); border-color: var(--link); }
.vis-private { color: var(--text-dim); border-color: var(--text-dim); }
.pin-toggle { background: none; border: 1px solid var(--border); border-radius: 999px; padding: .1rem .5rem; font-size: .78rem; cursor: pointer; transition: .15s; color: var(--text-dim); }
.pin-toggle.pinned { color: var(--warn); border-color: var(--warn); }
.empty-msg { color: var(--text-dim); }

/* Special pages section — homepage + operator grid */
.special-pages-section { margin-bottom: .75rem; }
.section-hint { color: var(--text-dim); font-size: .82rem; margin-bottom: .75rem; }
.special-pages-layout {
  display: flex;
  align-items: stretch;
  gap: 1rem;
}

/* Homepage card */
.special-home-card {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: .35rem;
  padding: 1rem 1.5rem;
  background: var(--bg2);
  border: 2px dashed var(--border);
  border-radius: 10px;
  cursor: pointer;
  transition: border-color .15s, background .15s, transform .1s;
  min-width: 110px;
}
.special-home-card:hover { border-color: #60a5fa; background: var(--bg3); transform: scale(1.03); }
.special-home-card.exists { border-style: solid; border-color: var(--success); }
.special-home-card.exists:hover { border-color: #60a5fa; }
.special-home-symbol { font-size: 1.8rem; line-height: 1; }
.special-home-label { font-size: .82rem; font-weight: 600; color: var(--text); }
.special-home-status { font-size: .72rem; color: var(--text-dim); font-family: var(--font-mono); }
.special-home-card.exists .special-home-status { color: var(--success); }

/* 3x3 Operator grid */
.special-ops-grid { display: flex; flex-direction: column; gap: .35rem; }
.special-ops-label { font-size: .75rem; color: var(--text-dim); text-transform: uppercase; letter-spacing: .06em; font-weight: 600; }
.special-ops-cells {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 4px;
}
.special-op-cell {
  aspect-ratio: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  gap: 1px;
  width: 56px;
  background: var(--bg2);
  border: 1px dashed var(--border);
  border-radius: 8px;
  cursor: pointer;
  transition: border-color .15s, background .15s, transform .1s;
  padding: 2px;
}
.special-op-cell:hover {
  border-color: var(--op-color, var(--accent));
  background: var(--bg3);
  transform: scale(1.1);
  box-shadow: 0 0 8px color-mix(in srgb, var(--op-color, var(--accent)) 25%, transparent);
}
.special-op-cell.exists { border-style: solid; border-color: color-mix(in srgb, var(--op-color) 60%, var(--border)); }
.special-op-symbol { font-size: 1.2rem; color: var(--op-color, var(--text)); line-height: 1; }
.special-op-code { font-size: .6rem; font-family: var(--font-mono); color: var(--text-dim); letter-spacing: .08em; font-weight: 600; }
.special-op-cell.exists .special-op-code { color: var(--op-color, var(--text)); }

/* Search & filter bar (Issue 5) */
.content-filter-bar {
  display: flex;
  gap: .65rem;
  align-items: center;
  flex-wrap: wrap;
  margin-bottom: 1rem;
}
.content-search {
  flex: 1;
  min-width: 200px;
}
.content-type-filters {
  display: flex;
  gap: .3rem;
}
.type-filter-btn {
  background: none;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: .2rem .65rem;
  font-size: .8rem;
  color: var(--text-dim);
  cursor: pointer;
  transition: .15s;
}
.type-filter-btn:hover { border-color: var(--accent); color: var(--text); }
.type-filter-btn.active { background: var(--accent); border-color: var(--accent); color: #fff; }

/* Sortable table headers (Issue 9) */
.sortable-th {
  cursor: pointer;
  user-select: none;
  transition: color .15s;
}
.sortable-th:hover { color: var(--text); }

/* Inline title editing (Issue 3) */
.editable-title {
  cursor: pointer;
  border-bottom: 1px dashed transparent;
  transition: border-color .15s;
}
.editable-title:hover { border-color: var(--accent); }
.inline-title-input {
  width: 100%;
  font-size: inherit;
  padding: .15rem .35rem;
  background: var(--bg);
  border: 1px solid var(--accent);
  border-radius: 3px;
}

/* Inline slug editing */
.editable-slug {
  cursor: pointer;
  border-bottom: 1px dashed transparent;
  transition: border-color .15s;
  font-family: var(--font-mono);
  font-size: .85rem;
  color: var(--text-dim);
}
.editable-slug:hover { border-color: var(--accent); color: var(--text); }
.inline-slug-edit { display: flex; flex-direction: column; gap: 2px; }
.inline-slug-input {
  width: 100%;
  font-family: var(--font-mono);
  font-size: .85rem;
  padding: .15rem .35rem;
  background: var(--bg);
  border: 1px solid var(--accent);
  border-radius: 3px;
}
.inline-slug-error {
  font-size: .72rem;
  color: var(--danger);
  line-height: 1.2;
}

/* Inline tags (Issue 4) */
.tags-cell { max-width: 200px; }
.inline-tags {
  display: flex;
  flex-wrap: wrap;
  gap: .25rem;
  align-items: center;
}
.tag-pill {
  display: inline-flex;
  align-items: center;
  gap: .15rem;
  background: var(--bg3);
  border-radius: 999px;
  padding: .05rem .45rem;
  font-size: .75rem;
  color: var(--text);
}
.tag-remove {
  background: none;
  border: none;
  color: var(--text-dim);
  font-size: .85rem;
  cursor: pointer;
  padding: 0 .1rem;
  line-height: 1;
}
.tag-remove:hover { color: var(--danger); }
.tag-add-btn {
  background: none;
  border: 1px dashed var(--border);
  border-radius: 999px;
  width: 1.4rem;
  height: 1.4rem;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: .85rem;
  color: var(--text-dim);
  cursor: pointer;
  transition: .15s;
}
.tag-add-btn:hover { border-color: var(--accent); color: var(--accent); }
.tag-add-input {
  width: 80px;
  font-size: .78rem;
  padding: .1rem .35rem;
  border-radius: 999px;
}

/* MetadataBar (Issue 10) */
.metadata-bar {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 1rem;
  overflow: hidden;
}
.metadata-bar-main {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: .6rem 1rem;
  flex-wrap: wrap;
}
.metadata-title-row {
  flex: 1;
  min-width: 0;
  display: flex;
  align-items: baseline;
  gap: .75rem;
}
.metadata-title {
  font-size: 1.15rem;
  font-weight: 600;
  cursor: pointer;
  border-bottom: 1px dashed transparent;
  transition: border-color .15s;
  margin: 0;
}
.metadata-title:hover { border-color: var(--accent); }
.metadata-title-input {
  font-size: 1.15rem;
  font-weight: 600;
  padding: .1rem .4rem;
  background: var(--bg);
  border: 1px solid var(--accent);
  border-radius: 3px;
  flex: 1;
}
.metadata-content-id {
  font-family: var(--font-mono);
  font-size: .78rem;
  color: var(--text-dim);
}
.metadata-quick-actions {
  display: flex;
  gap: .5rem;
  align-items: center;
}
.metadata-details-toggle {
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .15rem .5rem;
  font-size: .78rem;
  color: var(--text-dim);
  cursor: pointer;
  transition: .15s;
}
.metadata-details-toggle:hover { border-color: var(--accent); color: var(--text); }
.metadata-details {
  padding: .75rem 1rem;
  border-top: 1px solid var(--border);
  display: flex;
  gap: 1.5rem;
  flex-wrap: wrap;
}
.metadata-field label {
  display: block;
  font-size: .78rem;
  color: var(--text-dim);
  margin-bottom: .25rem;
}
.metadata-slug {
  font-size: .85rem;
}
.metadata-slug.editable {
  cursor: pointer;
  border-bottom: 1px dashed transparent;
  transition: border-color .15s;
}
.metadata-slug.editable:hover { border-color: var(--accent); }
.metadata-slug-edit { display: flex; flex-direction: column; gap: 2px; }
.metadata-slug-input {
  font-family: var(--font-mono);
  font-size: .85rem;
  padding: .25rem .45rem;
  background: var(--bg);
  border: 1px solid var(--accent);
  border-radius: 3px;
}
.metadata-slug-error {
  font-size: .72rem;
  color: var(--danger);
  line-height: 1.2;
}

/* Archive / soft-delete */
.btn-danger { background: var(--danger); border-color: var(--danger); color: #fff; }
.btn-danger:hover { background: color-mix(in srgb, var(--danger) 80%, #000); border-color: color-mix(in srgb, var(--danger) 80%, #000); color: #fff; }
.btn-archive { color: var(--danger); border-color: var(--border); }
.btn-archive:hover { border-color: var(--danger); background: color-mix(in srgb, var(--danger) 10%, transparent); }
.btn-restore { color: var(--success); border-color: var(--success); }
.btn-restore:hover { background: color-mix(in srgb, var(--success) 12%, transparent); }
.archive-section { border-top: 1px solid var(--border); padding-top: 1rem; }
.archive-toggle {
  display: flex;
  align-items: center;
  gap: .5rem;
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text-dim);
  padding: .4rem .85rem;
  font-size: .88rem;
  cursor: pointer;
  transition: .15s;
}
.archive-toggle:hover { border-color: var(--accent); color: var(--text); }
.archive-chevron { font-size: .7rem; transition: transform .2s; }
.archive-chevron.open { transform: rotate(180deg); }
.archive-table { margin-top: .75rem; }
.archived-row { opacity: .7; }
.archived-title { color: var(--text-dim); }
.status-archived { color: var(--text-dim); border-color: var(--border); }

/* Settings */
.settings-panel { max-width: 560px; }
.settings-panel h2 { margin-bottom: 1.25rem; }
.settings-section { margin-bottom: 1.5rem; }
.settings-section h3 { font-size: .95rem; color: var(--text-dim); margin-bottom: .75rem; padding-bottom: .35rem; border-bottom: 1px solid var(--border); text-transform: uppercase; letter-spacing: .04em; font-weight: 500; }
.settings-info { background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); overflow: hidden; margin-bottom: .75rem; }
.info-row { display: flex; gap: 1rem; padding: .6rem 1rem; border-bottom: 1px solid var(--border); align-items: center; font-size: .9rem; }
.info-row:last-child { border-bottom: none; }
.info-row span { color: var(--text-dim); min-width: 100px; }
.settings-note { color: var(--text-dim); font-size: .88rem; background: var(--bg2); border: 1px solid var(--border); border-radius: var(--radius); padding: 1rem; }
.settings-note strong { color: var(--text); }
.settings-saved { background: color-mix(in srgb, var(--success) 15%, var(--bg2)); border: 1px solid var(--success); border-radius: var(--radius); padding: .4rem .75rem; margin-bottom: 1rem; font-size: .85rem; color: var(--success); }
.settings-reset { margin-top: 1rem; padding-top: 1rem; border-top: 1px solid var(--border); }
.field-hint { color: var(--text-dim); font-size: .78rem; margin-top: .15rem; }

/* WriteGuard */
.access-checking { color: var(--text-dim); padding: 3rem; text-align: center; }
.access-denied, .access-no-room {
  max-width: 480px;
  margin: 4rem auto;
  text-align: center;
  padding: 2rem;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 10px;
}
.access-icon { font-size: 2.5rem; margin-bottom: .75rem; }
.access-denied h3, .access-no-room h3 { margin-bottom: .75rem; }
.access-denied p, .access-no-room p { color: var(--text-dim); margin-bottom: .5rem; font-size: .95rem; }
.access-denied details { margin-top: 1.5rem; text-align: left; }
.access-denied summary { cursor: pointer; color: var(--text-dim); font-size: .85rem; margin-bottom: .5rem; }
.access-denied pre {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .75rem;
  font-size: .78rem;
  overflow-x: auto;
  white-space: pre-wrap;
  word-break: break-all;
  color: var(--text-dim);
}

/* Markdown toolbar */
.md-toolbar {
  display: flex;
  flex-wrap: wrap;
  gap: .3rem;
  padding: .4rem .5rem;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-bottom: none;
  border-radius: var(--radius) var(--radius) 0 0;
}
.md-toolbar-btn {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text-dim);
  font-size: .78rem;
  font-family: var(--font-mono);
  padding: .2rem .5rem;
  transition: background .15s, color .15s;
}
.md-toolbar-btn:hover { background: var(--accent); color: #fff; border-color: var(--accent); }

/* Code blocks in preview */
.preview-body pre {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .75rem 1rem;
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: .88em;
  color: var(--code-text);
  margin: .75rem 0;
}
.preview-body pre code { background: none; padding: 0; color: inherit; font-size: inherit; }
.preview-body ul, .preview-body ol { padding-left: 1.5rem; margin: .5rem 0; }
.preview-body li { margin: .2rem 0; }
.preview-body a { color: var(--link); }
.preview-body hr { border: none; border-top: 1px solid var(--border); margin: 1rem 0; }
.preview-body h1, .preview-body h2, .preview-body h3, .preview-body h4 { margin: 1rem 0 .4rem; }

/* Rich Text Editor (TipTap) */
.rich-editor-wrapper {
  display: flex;
  flex-direction: column;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  background: var(--bg2);
}

/* Toolbar */
.rte-toolbar {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: .25rem;
  padding: .4rem .6rem;
  background: var(--bg3);
  border-bottom: 1px solid var(--border);
}
.rte-toolbar-group { display: flex; gap: .2rem; }
.rte-sep { width: 1px; height: 20px; background: var(--border); margin: 0 .25rem; flex-shrink: 0; }
.rte-btn {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text-dim);
  font-size: .78rem;
  font-family: var(--font-mono);
  padding: .2rem .5rem;
  transition: background .15s, color .15s;
  cursor: pointer;
  white-space: nowrap;
}
.rte-btn:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
.rte-btn.active { background: var(--accent); color: #fff; border-color: var(--accent); }
.rte-btn:disabled { opacity: .4; cursor: not-allowed; }
.rte-btn:disabled:hover { background: var(--bg2); color: var(--text-dim); border-color: var(--border); }
.rte-btn-danger { color: var(--danger); }
.rte-btn-danger:hover { background: var(--danger); color: #fff; border-color: var(--danger); }

/* Editor content area */
.rich-editor-content { min-height: 400px; max-height: 70vh; overflow-y: auto; }
.rich-editor-content .tiptap { padding: 1rem 1.25rem; min-height: 400px; outline: none; color: var(--text); line-height: 1.7; }
.rich-editor-content .tiptap > * + * { margin-top: .75em; }
.rich-editor-content .tiptap p.is-editor-empty:first-child::before {
  content: attr(data-placeholder);
  float: left;
  color: var(--text-dim);
  pointer-events: none;
  height: 0;
}

/* Typography inside editor */
.rich-editor-content .tiptap h1 { font-size: 2rem; font-weight: 700; margin-top: 1.25rem; margin-bottom: .5rem; }
.rich-editor-content .tiptap h2 { font-size: 1.5rem; font-weight: 600; margin-top: 1.25rem; margin-bottom: .5rem; }
.rich-editor-content .tiptap h3 { font-size: 1.2rem; font-weight: 600; margin-top: 1rem; margin-bottom: .4rem; }
.rich-editor-content .tiptap h4 { font-size: 1rem; font-weight: 600; margin-top: 1rem; margin-bottom: .4rem; }
.rich-editor-content .tiptap strong { font-weight: 700; }
.rich-editor-content .tiptap em { font-style: italic; }
.rich-editor-content .tiptap s { text-decoration: line-through; }
.rich-editor-content .tiptap code { background: var(--bg3); padding: 1px 4px; border-radius: 3px; font-family: var(--font-mono); font-size: .9em; }
.rich-editor-content .tiptap pre {
  background: var(--code-bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .75rem 1rem;
  overflow-x: auto;
  font-family: var(--font-mono);
  font-size: .88em;
  color: var(--code-text);
  margin: .75rem 0;
}
.rich-editor-content .tiptap pre code { background: none; padding: 0; color: inherit; font-size: inherit; }
.rich-editor-content .tiptap ul, .rich-editor-content .tiptap ol { padding-left: 1.5rem; }
.rich-editor-content .tiptap li { margin: .2rem 0; }
.rich-editor-content .tiptap li > p { margin: 0; }
.rich-editor-content .tiptap blockquote {
  border-left: 4px solid var(--accent);
  padding: .5rem 1rem;
  margin: .75rem 0;
  background: var(--bg3);
  border-radius: 0 var(--radius) var(--radius) 0;
}
.rich-editor-content .tiptap blockquote p { margin: 0; }
.rich-editor-content .tiptap hr { border: none; border-top: 1px solid var(--border); margin: 1.5rem 0; }
.rich-editor-content .tiptap a { color: var(--link); text-decoration: underline; cursor: pointer; }
.rich-editor-content .tiptap a[data-content-id] {
  color: var(--accent);
  text-decoration: underline;
  border-bottom: 2px solid var(--accent);
  text-decoration: none;
}
.rich-editor-content .tiptap img { max-width: 100%; border-radius: var(--radius); margin: .5rem 0; }

/* Columns inside editor */
.rich-editor-content .tiptap .editor-columns {
  display: grid;
  gap: 1rem;
  margin: 1rem 0;
  padding: .5rem;
  border: 2px dashed var(--border);
  border-radius: var(--radius);
  position: relative;
  min-height: 60px;
}
.rich-editor-content .tiptap .editor-columns::before {
  content: 'Columns';
  position: absolute;
  top: -10px;
  left: 8px;
  background: var(--bg2);
  padding: 0 6px;
  font-size: .7rem;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: .05em;
}
.rich-editor-content .tiptap .editor-column {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: .75rem;
  min-height: 40px;
}
.rich-editor-content .tiptap .editor-column > * + * { margin-top: .5em; }
.rich-editor-content .tiptap table { border-collapse: collapse; width: 100%; margin: .75rem 0; }
.rich-editor-content .tiptap th, .rich-editor-content .tiptap td { border: 1px solid var(--border); padding: .45rem .65rem; text-align: left; min-width: 80px; }
.rich-editor-content .tiptap th { background: var(--bg3); font-weight: 600; }
.rich-editor-content .tiptap .selectedCell { background: color-mix(in srgb, var(--accent) 15%, var(--bg2)); }

/* HTML Widget inside editor */
.html-widget-wrapper {
  margin: 1rem 0;
  border: 2px dashed var(--border);
  border-radius: var(--radius);
  position: relative;
  overflow: hidden;
  transition: border-color .15s;
}
.html-widget-wrapper.selected,
.html-widget-wrapper:hover {
  border-color: var(--accent);
}
.html-widget-preview {
  position: relative;
  min-height: 60px;
}
.html-widget-label {
  position: absolute;
  top: 0;
  left: 0;
  background: var(--accent);
  color: #fff;
  font-size: .65rem;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: .05em;
  padding: 1px 8px;
  border-radius: 0 0 4px 0;
  z-index: 2;
  pointer-events: none;
}
.html-widget-iframe {
  display: block;
  width: 100%;
  min-height: 60px;
  border: none;
  background: var(--bg2);
}
.html-widget-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 60px;
  color: var(--text-dim);
  font-size: .85rem;
  font-style: italic;
}
.html-widget-overlay {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: .5rem;
  background: rgba(0,0,0,.5);
  opacity: 0;
  transition: opacity .15s;
}
.html-widget-wrapper:hover .html-widget-overlay,
.html-widget-wrapper.selected .html-widget-overlay {
  opacity: 1;
}

/* HTML Widget inline editor (textarea mode) */
.html-widget-editor {
  display: flex;
  flex-direction: column;
}
.html-widget-editor-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .4rem .65rem;
  background: var(--bg3);
  border-bottom: 1px solid var(--border);
  font-size: .8rem;
  font-weight: 600;
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: .03em;
}
.html-widget-editor-actions {
  display: flex;
  gap: .35rem;
}
.html-widget-textarea {
  width: 100%;
  min-height: 180px;
  padding: .65rem;
  background: var(--code-bg);
  color: var(--code-text);
  border: none;
  font-family: var(--font-mono);
  font-size: .82rem;
  line-height: 1.5;
  resize: vertical;
  outline: none;
  tab-size: 2;
}
.html-widget-textarea::placeholder {
  color: var(--text-dim);
  font-style: italic;
}
.html-widget-editor-hint {
  padding: .3rem .65rem;
  background: var(--bg3);
  border-top: 1px solid var(--border);
  font-size: .7rem;
  color: var(--text-dim);
}

/* Bubble menu */
.bubble-menu {
  display: flex;
  gap: .2rem;
  padding: .3rem;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: 0 4px 16px var(--shadow-color);
}
.bubble-menu button {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 4px;
  color: var(--text-dim);
  font-size: .78rem;
  font-family: var(--font-mono);
  padding: .2rem .5rem;
  cursor: pointer;
  transition: .15s;
}
.bubble-menu button:hover, .bubble-menu button.is-active {
  background: var(--accent);
  color: #fff;
  border-color: var(--accent);
}

/* Column insertion menu */
.column-menu {
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: .75rem;
  margin-bottom: .5rem;
}
.column-menu-header { color: var(--text-dim); font-size: .78rem; text-transform: uppercase; letter-spacing: .05em; margin-bottom: .5rem; }
.column-menu-presets { display: grid; grid-template-columns: repeat(auto-fill, minmax(120px, 1fr)); gap: .4rem; }
.column-preset-btn {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: .3rem;
  padding: .5rem;
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: .15s;
  color: var(--text-dim);
  font-size: .78rem;
}
.column-preset-btn:hover { border-color: var(--accent); color: var(--text); }
.column-preset-preview { display: grid; gap: 3px; width: 100%; }
.column-preset-cell { height: 16px; background: var(--accent); opacity: .4; border-radius: 2px; }
.column-preset-btn:hover .column-preset-cell { opacity: .7; }
.column-menu-actions { display: flex; gap: .5rem; margin-top: .75rem; padding-top: .5rem; border-top: 1px solid var(--border); }

/* Link picker modal */
.link-picker-overlay {
  position: fixed;
  inset: 0;
  background: var(--overlay-bg);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 200;
}
.link-picker {
  background: var(--bg2);
  border: 1px solid var(--border);
  border-radius: 12px;
  width: 100%;
  max-width: 480px;
  max-height: 80vh;
  display: flex;
  flex-direction: column;
  overflow: hidden;
}
.link-picker-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: .75rem 1rem;
  border-bottom: 1px solid var(--border);
}
.link-picker-header h3 { font-size: 1rem; margin: 0; }
.link-picker-tabs {
  display: flex;
  border-bottom: 1px solid var(--border);
}
.link-tab {
  flex: 1;
  padding: .5rem;
  background: none;
  border: none;
  border-bottom: 2px solid transparent;
  color: var(--text-dim);
  font-size: .85rem;
  cursor: pointer;
  transition: .15s;
}
.link-tab:hover { color: var(--text); }
.link-tab.active { color: var(--accent); border-bottom-color: var(--accent); }
.link-picker-body { padding: 1rem; display: flex; flex-direction: column; gap: .5rem; }
.link-search {
  width: 100%;
  padding: .5rem .75rem;
  font-size: .9rem;
}
.link-results {
  max-height: 300px;
  overflow-y: auto;
  display: flex;
  flex-direction: column;
  gap: .25rem;
}
.link-result-item {
  display: flex;
  align-items: center;
  gap: .5rem;
  padding: .5rem .75rem;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  cursor: pointer;
  transition: .15s;
  width: 100%;
  text-align: left;
}
.link-result-item:hover { border-color: var(--accent); background: color-mix(in srgb, var(--accent) 10%, var(--bg3)); }
.link-result-title { flex: 1; color: var(--text); font-size: .9rem; }
.link-result-slug { color: var(--text-dim); font-family: var(--font-mono); font-size: .78rem; }
.link-empty { color: var(--text-dim); text-align: center; padding: 1rem; font-size: .85rem; }
.link-picker-hint { color: var(--text-dim); font-size: .75rem; padding-top: .5rem; border-top: 1px solid var(--border); margin-top: .25rem; }

/* Revision format badge */
.rev-format-badge {
  display: inline-block;
  padding: .05rem .35rem;
  border-radius: 999px;
  font-size: .65rem;
  border: 1px solid var(--border);
  color: var(--text-dim);
  text-transform: uppercase;
  letter-spacing: .03em;
}

/* Column block containers (PageBuilder) */
.builder-block-columns .block-content { width: 100%; }

.col-drop-zone {
  background: var(--bg2);
  border: 2px dashed var(--border);
  border-radius: var(--radius);
  padding: 6px;
  min-height: 60px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  transition: border-color .15s, background .15s;
}
.col-drop-zone.col-drop-over {
  border-color: var(--accent);
  background: color-mix(in srgb, var(--accent) 8%, var(--bg2));
}

.col-sub-block {
  display: flex;
  align-items: center;
  gap: 4px;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 4px 6px;
  cursor: pointer;
  transition: border-color .15s;
  font-size: .82rem;
}
.col-sub-block:hover { border-color: var(--accent); }
.col-sub-block.selected { border-color: var(--accent); background: color-mix(in srgb, var(--accent) 12%, var(--bg3)); }

.col-sub-preview {
  flex: 1;
  min-width: 0;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  color: var(--text-dim);
  font-size: .78rem;
}

.col-sub-actions {
  display: flex;
  gap: 1px;
  flex-shrink: 0;
}
.col-sub-actions button {
  background: none;
  border: none;
  color: var(--text-dim);
  font-size: .78rem;
  padding: 1px 4px;
  border-radius: 3px;
  cursor: pointer;
  line-height: 1;
}
.col-sub-actions button:hover { background: var(--bg2); color: var(--text); }
.col-sub-delete:hover { color: var(--danger) !important; }

.col-add-btn {
  width: 100%;
  background: none;
  border: 1px dashed var(--border);
  border-radius: 4px;
  color: var(--text-dim);
  font-size: .75rem;
  padding: 3px 0;
  cursor: pointer;
  transition: .15s;
  margin-top: 2px;
}
.col-add-btn:hover { border-color: var(--accent); color: var(--accent); }

.col-add-menu {
  position: absolute;
  bottom: 100%;
  left: 0;
  right: 0;
  background: var(--bg3);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 4px;
  display: flex;
  flex-direction: column;
  gap: 2px;
  z-index: 20;
  max-height: 200px;
  overflow-y: auto;
  box-shadow: 0 4px 12px rgba(0,0,0,.4);
}
.col-add-menu button {
  display: flex;
  align-items: center;
  gap: 6px;
  background: none;
  border: none;
  color: var(--text-dim);
  font-size: .78rem;
  padding: 4px 6px;
  border-radius: 3px;
  cursor: pointer;
  text-align: left;
  white-space: nowrap;
}
.col-add-menu button:hover { background: var(--bg2); color: var(--text); }

/* ── Custom picker (replaces native <select>) ── */
.custom-picker { position: relative; }
.custom-picker-trigger {
  display: flex; align-items: center; justify-content: space-between; gap: 4px;
  width: 100%; padding: 3px 6px; font-size: .72rem;
  background: var(--bg2); color: var(--text); border: 1px solid var(--border);
  border-radius: 4px; cursor: pointer; transition: border-color .15s;
}
.custom-picker-trigger:hover { border-color: var(--accent); }
.custom-picker-trigger:disabled { opacity: .5; cursor: not-allowed; }
.custom-picker-label { overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
.custom-picker-arrow { font-size: .6rem; color: var(--text-dim); flex-shrink: 0; }
.custom-picker-dropdown {
  position: absolute; top: 100%; left: 0; right: 0; z-index: 50;
  background: var(--bg2); border: 1px solid var(--border); border-radius: 4px;
  box-shadow: 0 4px 12px var(--shadow-color); max-height: 160px; overflow-y: auto;
  margin-top: 2px;
}
.custom-picker-option {
  display: block; width: 100%; padding: 5px 8px; font-size: .72rem;
  background: none; border: none; color: var(--text-dim); text-align: left;
  cursor: pointer; transition: background .1s, color .1s;
}
.custom-picker-option:hover { background: var(--bg3); color: var(--text); }
.custom-picker-option.active { color: var(--accent); font-weight: 600; }

/* ── Custom select group (segmented buttons) ── */
.custom-select-group { display: flex; gap: 0; border: 1px solid var(--border); border-radius: 4px; overflow: hidden; }
.custom-select-btn {
  flex: 1; padding: 4px 8px; font-size: .78rem; background: var(--bg2);
  border: none; border-right: 1px solid var(--border); color: var(--text-dim);
  cursor: pointer; transition: background .1s, color .1s; text-transform: capitalize;
}
.custom-select-btn:last-child { border-right: none; }
.custom-select-btn:hover { background: var(--bg3); color: var(--text); }
.custom-select-btn.active { background: var(--accent); color: #fff; }

/* Responsive */
@media (max-width: 900px) {
  .builder-layout { grid-template-columns: 1fr; }
  .editor-split { grid-template-columns: 1fr; }
  .create-form { flex-direction: column; }
}
